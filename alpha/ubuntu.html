<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <title>BigClown Alpha – Software Setup for Ubuntu Host Platform</title>

    <link href="/stylesheets/main.css" rel="stylesheet" />
  </head>

  <body>
    <header>
      <a class="logo" href="https://www.bigclown.com/">
  <img src="/images/bigclown-logo.png" alt="BigClown - Open-Source Electronics" />
</a>

    </header>

    <article class="main-content alpha alpha_ubuntu">
      <h1>
        BigClown Alpha – Software Setup for Ubuntu Host Platform
      </h1>
      <div class="sect1">
<h2 id="_prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Ubuntu system 16.04, 15.10, 14.04 or 12.04 (minimum kernel version 3.10)</p>
</li>
<li>
<p>Administrator rights</p>
</li>
<li>
<p>Internet connectivity</p>
</li>
<li>
<p>USB cable, Bridge Module and sensors/actuators (Tags, Modules)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install_docker">Install Docker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please follow instructions at <a href="https://docs.docker.com/engine/installation/linux/ubuntulinux">Docker page</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configure_docker">Configure Docker</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Disconnect Bridge Module from USB.</p>
</li>
<li>
<p>Connect Bridge Module with USB cable again.</p>
</li>
<li>
<p>Create <em>host directory</em> for Clown.Hub:</p>
<div class="literalblock">
<div class="content">
<pre>mkdir -v $HOME/hub</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_clown_hub_software_on_ubuntu">Run Clown.Hub software on Ubuntu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>BigClown uses Docker container technology for seamless software delivery.</p>
</div>
<div class="paragraph">
<p>Pull Docker image from Docker Hub and run the container in one command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">docker run -d -p 8080:8080 -p 1883:1883 --privileged -v /dev:/dev \
  -v $HOME/hub:/var/hub -h hub-container --name hub clown/hub</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can stop container by:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>docker stop hub</pre>
</div>
</div>
<div class="paragraph">
<p>And start it again by:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>docker start hub</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_open_the_browser_and_play_with_the_gadgets">Open the browser and play with the gadgets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Navigate to URL <a href="https://hub.local:8080/dashboard" class="bare">https://hub.local:8080/dashboard</a> or <a href="https://localhost:8080/dashboard" class="bare">https://localhost:8080/dashboard</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Be aware that the connection is not encrypted, so it’s not safe to access it over public internet.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mqtt_playground">MQTT playground</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Look at measured values (this will subscribe to messages from MQTT broker running inside the container):</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">docker exec hub mosquitto_sub -v -t 'nodes/bridge/0/#'</code></pre>
</div>
</div>
</li>
<li>
<p>Set relay to “true” state (this will publish message to MQTT broker running inside the container):</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">docker exec hub \
  mosquitto_pub -t nodes/bridge/0/relay/i2c0-3b/set -m '{&quot;state&quot;: true}'</code></pre>
</div>
</div>
</li>
<li>
<p>Set relay to “false” state:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">docker exec hub \
  mosquitto_pub -t nodes/bridge/0/relay/i2c0-3b/set -m '{&quot;state&quot;: false}'</code></pre>
</div>
</div>
</li>
<li>
<p>If you want to see values from a simulator (running as parallel process inside the container):</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">docker exec hub mosquitto_sub -v -t 'nodes/bridge/simulator/#'</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
    </article>

    <footer>
      Copyright © 2016
&puncsp;
<a href="https://www.bigclown.com/info">BigClown Labs s.&thinsp;r.&thinsp;o.</a>

    </footer>
  </body>
</html>
